/**-----------------------------------------------------------------------------------------
* Copyright Â© 2020 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/
System.register("@progress/kendo-angular-treeview",["tslib","@angular/core","rxjs","rxjs/operators","@progress/kendo-common","@progress/kendo-angular-common","@progress/kendo-angular-l10n","@telerik/kendo-draggable","@angular/common","@angular/animations"],function(x){var o,a,s,d,c,p,l,u,h,f;function t(e){return e.__useDefault?e.default:e}return{setters:[function(e){o=t(e)},function(e){a=t(e)},function(e){s=t(e)},function(e){d=t(e)},function(e){c=t(e)},function(e){p=t(e)},function(e){l=t(e)},function(e){u=t(e)},function(e){h=t(e)},function(e){f=t(e)}],execute:function(){function n(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i,r;r={},n.m=i=[function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(6),o=/^(?:a|input|select|option|textarea|button|object)$/i;n.match=function(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return!!i&&i.call(e,t)},n.closestWithMatch=function(e,t){if(!document.documentElement.contains(e))return null;for(var i=e;null!==i&&1===i.nodeType;){if(n.match(i,t))return i;i=i.parentElement||i.parentNode}return null},n.noop=function(){},n.isPresent=function(e){return null!=e},n.isBlank=function(e){return null==e},n.isArray=function(e){return Array.isArray(e)},n.isNullOrEmptyString=function(e){return n.isBlank(e)||0===e.trim().length},n.closestNode=function(e){return i.isDocumentAvailable()?e.closest?e.closest("li.k-treeview-item"):n.closestWithMatch(e,"li.k-treeview-item"):null},n.isFocusable=function(e){if(e.tagName){var t=e.tagName.toLowerCase(),i=e.getAttribute("tabIndex"),n="-1"===i,r=null!==i&&!n;return o.test(t)&&(r=!e.disabled&&!n),r}return!1},n.isContent=function(e){if(!i.isDocumentAvailable())return null;for(var t=e;t&&!n.match(t,".k-in,.k-treeview-item,.k-treeview");)t=t.parentNode;return t?n.match(t,".k-in"):void 0},n.closest=function(e,t){for(;e&&!t(e);)e=e.parentNode;return e},n.hasParent=function(e,t){return Boolean(n.closest(e,function(e){return e===t}))},n.focusableNode=function(e){return e.nativeElement.querySelector('li[tabindex="0"]')},n.hasActiveNode=function(e,t){var i=t||n.closestNode(e);return i&&(i===e||e.tabIndex<0)},n.nodeId=function(e){return e?e.getAttribute("data-treeindex"):""},n.nodeIndex=function(e){return(e||{}).index},n.dataItemsEqual=function(e,t){return!n.isPresent(e)&&!n.isPresent(t)||n.isPresent(e)&&n.isPresent(t)&&e.item.dataItem===t.item.dataItem}},function(e,t){e.exports=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),l=i(1),r=i(6),o=i(38),u=i(3),a=i(37),h=i(56),s=i(14),d=i(13),c=i(27),p=i(12),f=i(36),m=i(11),v=i(26),g=i(25),y=i(2),_=[s.ExpandStateService,d.IndexBuilderService,g.TreeViewLookupService,c.LoadingNotificationService,f.NodeChildrenService,p.NavigationService,v.SelectionService,a.DataChangeNotificationService,o.LocalizationService,{provide:o.L10N_PREFIX,useValue:"kendo.treeview"}],b=(Object.defineProperty(x.prototype,"direction",{get:function(){return this.localization.rtl?"rtl":"ltr"},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"animate",{get:function(){return!this._animate},set:function(e){this._animate=e},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"nodes",{get:function(){return this.data.value},set:function(e){this.dataChangeNotification.notify(),this.data.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"hasChildren",{get:function(){return this._hasChildren||h.hasChildren},set:function(e){this._hasChildren=e,this.expandIcons=Boolean(this._isExpanded&&this._hasChildren)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"isChecked",{get:function(){return this._isChecked||h.isChecked},set:function(e){this._isChecked=e,this.checkboxes=Boolean(this._isChecked)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"isExpanded",{get:function(){return this._isExpanded||h.isExpanded},set:function(e){this._isExpanded=e,this.expandIcons=Boolean(this._isExpanded&&this._hasChildren)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"isSelected",{get:function(){return this._isSelected||h.isSelected},set:function(e){this._isSelected=e},enumerable:!0,configurable:!0}),x.prototype.ngOnChanges=function(e){this.navigationService.navigable=Boolean(this.navigable)},x.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe(),this.domSubscriptions.forEach(function(e){return e()})},x.prototype.ngOnInit=function(){var n=this;this.subscriptions.add(this.nodeChildrenService.changes.subscribe(function(e){return n.childrenLoaded.emit(e)})),this.subscriptions.add(this.expandService.changes.subscribe(function(e){var t=e.index,i=e.dataItem;return e.expand?n.expand.emit({index:t,dataItem:i}):n.collapse.emit({index:t,dataItem:i})})),this.subscriptions.add(this.navigationService.checks.subscribe(function(e){return n.checkedChange.emit(n.treeViewLookupService.itemLookup(e))})),this.subscriptions.add(this.selectionService.changes.subscribe(function(e){r.hasObservers(n.selectionChange)&&n.ngZone.run(function(){n.selectionChange.emit(e)})})),this.element&&this.ngZone.runOutsideAngular(function(){n.attachDomHandlers()})},x.prototype.blur=function(){if(r.isDocumentAvailable()){var e=y.focusableNode(this.element);document.activeElement===e&&e.blur()}},x.prototype.focus=function(e){this.navigationService.activateIndex(e);var t=y.focusableNode(this.element);t&&t.focus()},x.prototype.itemLookup=function(e){return this.treeViewLookupService.itemLookup(e)},x.prototype.isDisabledNode=function(e){return this.navigationService.isDisabled(e.item.index)},x.prototype.expandNode=function(e,t){this.expandService.expand(t,e)},x.prototype.collapseNode=function(e,t){this.expandService.collapse(t,e)},x.prototype.attachDomHandlers=function(){var e=this.element.nativeElement;this.clickHandler=this.clickHandler.bind(this),this.domSubscriptions.push(this.renderer.listen(e,"contextmenu",this.clickHandler),this.renderer.listen(e,"click",this.clickHandler),this.renderer.listen(e,"dblclick",this.clickHandler),this.renderer.listen(e,"focusin",this.focusHandler.bind(this)),this.renderer.listen(e,"focusout",this.blurHandler.bind(this)),this.renderer.listen(e,"keydown",this.keydownHandler.bind(this)))},x.prototype.focusHandler=function(e){var t,i=this;y.match(e.target,".k-treeview-item")?t=e.target:y.isFocusable(e.target)||(t=y.closestNode(e.target)),t&&(this.navigationService.activateIndex(y.nodeId(e.target)),!this.isActive&&r.hasObservers(this.onFocus)&&this.ngZone.run(function(){i.onFocus.emit()}),this.isActive=!0)},x.prototype.blurHandler=function(e){var t=this;!this.isActive||!y.match(e.target,".k-treeview-item")||e.relatedTarget&&y.match(e.relatedTarget,".k-treeview-item")&&y.hasParent(e.relatedTarget,this.element.nativeElement)||(this.navigationService.deactivate(),this.isActive=!1,r.hasObservers(this.onBlur)&&this.ngZone.run(function(){t.onBlur.emit()}))},x.prototype.clickHandler=function(t){var i=this,e=t.target;if(!("contextmenu"===t.type&&!r.hasObservers(this.nodeClick)||"click"===t.type&&!r.hasObservers(this.nodeClick)&&!r.hasObservers(this.selectionChange)||"dblclick"===t.type&&!r.hasObservers(this.nodeDblClick)||y.isFocusable(e))&&y.isContent(e)&&y.hasParent(e,this.element.nativeElement)){var n=y.nodeId(y.closestNode(e));n&&!this.navigationService.isDisabled(n)&&this.ngZone.run(function(){var e=i.treeViewLookupService.itemLookup(n);"click"===t.type&&i.navigationService.selectIndex(n),("dblclick"===t.type?i.nodeDblClick:i.nodeClick).emit({item:e.item,originalEvent:t,type:t.type})})}},x.prototype.keydownHandler=function(e){var t=this;this.isActive&&this.navigable&&this.ngZone.run(function(){t.navigationService.move(e)})},n.__decorate([l.HostBinding("class.k-widget"),l.HostBinding("class.k-treeview"),n.__metadata("design:type",Boolean)],x.prototype,"classNames",void 0),n.__decorate([l.HostBinding("attr.role"),n.__metadata("design:type",String)],x.prototype,"role",void 0),n.__decorate([l.HostBinding("attr.dir"),n.__metadata("design:type",String),n.__metadata("design:paramtypes",[])],x.prototype,"direction",null),n.__decorate([l.ViewChild("assetsContainer",{read:l.ViewContainerRef,static:!0}),n.__metadata("design:type",l.ViewContainerRef)],x.prototype,"assetsContainer",void 0),n.__decorate([l.Input(),l.HostBinding("@.disabled"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[Boolean])],x.prototype,"animate",null),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"childrenLoaded",void 0),n.__decorate([l.Output("blur"),n.__metadata("design:type",l.EventEmitter)],x.prototype,"onBlur",void 0),n.__decorate([l.Output("focus"),n.__metadata("design:type",l.EventEmitter)],x.prototype,"onFocus",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"expand",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"collapse",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"nodeDragStart",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"nodeDrag",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"nodeDrop",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"nodeDragEnd",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"addItem",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"removeItem",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"checkedChange",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"selectionChange",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"nodeClick",void 0),n.__decorate([l.Output(),n.__metadata("design:type",l.EventEmitter)],x.prototype,"nodeDblClick",void 0),n.__decorate([l.ContentChild(m.NodeTemplateDirective),n.__metadata("design:type",m.NodeTemplateDirective)],x.prototype,"nodeTemplate",void 0),n.__decorate([l.Input(),n.__metadata("design:type",Array),n.__metadata("design:paramtypes",[Array])],x.prototype,"nodes",null),n.__decorate([l.Input(),n.__metadata("design:type",Object)],x.prototype,"textField",void 0),n.__decorate([l.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],x.prototype,"hasChildren",null),n.__decorate([l.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],x.prototype,"isChecked",null),n.__decorate([l.Input(),n.__metadata("design:type",Function)],x.prototype,"isDisabled",void 0),n.__decorate([l.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],x.prototype,"isExpanded",null),n.__decorate([l.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],x.prototype,"isSelected",null),n.__decorate([l.Input(),n.__metadata("design:type",Boolean)],x.prototype,"navigable",void 0),n.__decorate([l.Input(),n.__metadata("design:type",Function)],x.prototype,"children",void 0),n.__decorate([l.Component({changeDetection:l.ChangeDetectionStrategy.Default,exportAs:"kendoTreeView",providers:_,selector:"kendo-treeview",template:'\n        <ul class="k-treeview-lines"\n            kendoTreeViewGroup\n            role="group"\n            [checkboxes]="checkboxes"\n            [expandIcons]="expandIcons"\n            [touchActions]="touchActions"\n            [children]="children"\n            [hasChildren]="hasChildren"\n            [isChecked]="isChecked"\n            [isDisabled]="isDisabled"\n            [isExpanded]="isExpanded"\n            [isSelected]="isSelected"\n            [nodeTemplateRef]="nodeTemplate?.templateRef"\n            [textField]="textField"\n            [nodes]="fetchNodes"\n        >\n        </ul>\n        <ng-container #assetsContainer></ng-container>\n    '}),n.__metadata("design:paramtypes",[l.ElementRef,s.ExpandStateService,p.NavigationService,f.NodeChildrenService,v.SelectionService,g.TreeViewLookupService,l.NgZone,l.Renderer2,a.DataChangeNotificationService,o.LocalizationService])],x));function x(e,t,i,n,r,o,a,s,d,c){var p=this;this.element=e,this.expandService=t,this.navigationService=i,this.nodeChildrenService=n,this.selectionService=r,this.treeViewLookupService=o,this.ngZone=a,this.renderer=s,this.dataChangeNotification=d,this.localization=c,this.classNames=!0,this.role="tree",this.fetchNodes=function(){return p.data},this.childrenLoaded=new l.EventEmitter,this.onBlur=new l.EventEmitter,this.onFocus=new l.EventEmitter,this.expand=new l.EventEmitter,this.collapse=new l.EventEmitter,this.nodeDragStart=new l.EventEmitter,this.nodeDrag=new l.EventEmitter,this.nodeDrop=new l.EventEmitter,this.nodeDragEnd=new l.EventEmitter,this.addItem=new l.EventEmitter,this.removeItem=new l.EventEmitter,this.checkedChange=new l.EventEmitter,this.selectionChange=new l.EventEmitter,this.nodeClick=new l.EventEmitter,this.nodeDblClick=new l.EventEmitter,this.isDisabled=h.isDisabled,this.navigable=!0,this.children=function(){return u.of([])},this.checkboxes=!1,this.expandIcons=!1,this.touchActions=!0,this.isActive=!1,this.data=new u.BehaviorSubject([]),this._animate=!0,this.subscriptions=new u.Subscription,this.domSubscriptions=[]}t.TreeViewComponent=b},function(e,t){e.exports=d},function(e,t){e.exports=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);n.__exportStar(i(35),t),n.__exportStar(i(34),t),n.__exportStar(i(19),t),n.__exportStar(i(33),t),n.__exportStar(i(32),t),n.__exportStar(i(31),t)},function(e,t){e.exports=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=n.__decorate([r.Directive({selector:"[kendoTreeViewDropHintTemplate]"}),n.__param(0,r.Optional()),n.__metadata("design:paramtypes",[r.TemplateRef])],a);function a(e){this.templateRef=e}t.DropHintTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=n.__decorate([r.Directive({selector:"[kendoTreeViewDragClueTemplate]"}),n.__param(0,r.Optional()),n.__metadata("design:paramtypes",[r.TemplateRef])],a);function a(e){this.templateRef=e}t.DragClueTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=n.__decorate([r.Directive({selector:"[kendoTreeViewNodeTemplate]"}),n.__param(0,r.Optional()),n.__metadata("design:paramtypes",[r.TemplateRef])],a);function a(e){this.templateRef=e}t.NodeTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(6),a=i(38),s=i(3),d=i(55),c=i(2),p=(Object.defineProperty(l.prototype,"model",{get:function(){return this._model},set:function(e){this._model=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"activeIndex",{get:function(){return c.nodeIndex(this.activeItem)||null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"focusableItem",{get:function(){return this.activeItem||this.model.firstNode()},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isActiveExpanded",{get:function(){return this.activeItem&&0<this.activeItem.children.length},enumerable:!0,configurable:!0}),l.prototype.activate=function(e){this.navigable&&e&&!this.isActive(c.nodeIndex(e))&&(this.isFocused=!0,this.activeItem=e||this.activeItem,this.notifyMove())},l.prototype.activateParent=function(e){this.activate(this.model.findParent(e))},l.prototype.activateIndex=function(e){e&&this.activate(this.model.findNode(e))},l.prototype.activateClosest=function(e){e&&c.nodeIndex(this.focusableItem)===e&&(this.activeItem=this.model.closestNode(e),this.notifyMove())},l.prototype.activateFocusable=function(){this.activeItem||(this.activeItem=this.model.firstNode(),this.notifyMove())},l.prototype.deactivate=function(){this.navigable&&this.isFocused&&(this.isFocused=!1,this.notifyMove())},l.prototype.checkIndex=function(e){this.isDisabled(e)||this.checks.next(e)},l.prototype.selectIndex=function(e){this.isDisabled(e)||this.selects.next(e)},l.prototype.isActive=function(e){return!!e&&this.isFocused&&this.activeIndex===e},l.prototype.isFocusable=function(e){return c.nodeIndex(this.focusableItem)===e},l.prototype.isDisabled=function(e){return this.model.findNode(e).disabled},l.prototype.registerItem=function(e,t,i){this.model.registerItem(e,t,i)},l.prototype.unregisterItem=function(e,t){this.isActive(t)&&this.activateParent(t),this.model.unregisterItem(e,t)},l.prototype.move=function(e){if(this.navigable){var t=this.actions[e.keyCode];t&&(t(),e.preventDefault())}},l.prototype.expand=function(e){var t=e.expand,i=e.intercept,n=c.nodeIndex(this.activeItem);n&&!i(n)&&this.notifyExpand(t)},l.prototype.moveToParent=function(){return!this.isActiveExpanded&&(this.activate(this.model.findParent(c.nodeIndex(this.activeItem))),!0)},l.prototype.moveToChild=function(){return!!this.isActiveExpanded&&(this.activate(this.model.findChild(c.nodeIndex(this.activeItem))),!0)},l.prototype.notifyExpand=function(e){this.expands.next(this.navigationState(e))},l.prototype.notifyMove=function(){this.moves.next(this.navigationState())},l.prototype.navigationState=function(e){return void 0===e&&(e=!1),{expand:e,index:c.nodeIndex(this.activeItem),isFocused:this.isFocused}},n.__decorate([r.Injectable(),n.__metadata("design:paramtypes",[a.LocalizationService])],l));function l(e){var t,i=this;this.localization=e,this.expands=new s.Subject,this.moves=new s.Subject,this.checks=new s.Subject,this.selects=new s.Subject,this.navigable=!0,this.actions=((t={})[o.Keys.ArrowUp]=function(){return i.activate(i.model.findPrev(i.focusableItem))},t[o.Keys.ArrowDown]=function(){return i.activate(i.model.findNext(i.focusableItem))},t[o.Keys.ArrowLeft]=function(){return i.expand({expand:i.localization.rtl,intercept:i.localization.rtl?i.moveToChild:i.moveToParent})},t[o.Keys.ArrowRight]=function(){return i.expand({expand:!i.localization.rtl,intercept:i.localization.rtl?i.moveToParent:i.moveToChild})},t[o.Keys.Home]=function(){return i.activate(i.model.firstNode())},t[o.Keys.End]=function(){return i.activate(i.model.lastNode())},t[o.Keys.Enter]=function(){return i.navigable&&i.selectIndex(c.nodeIndex(i.activeItem))},t[o.Keys.Space]=function(){return i.navigable&&i.checkIndex(c.nodeIndex(i.activeItem))},t),this.isFocused=!1,this._model=new d.NavigationModel,this.moveToChild=this.moveToChild.bind(this),this.moveToParent=this.moveToParent.bind(this)}t.NavigationService=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=(a.prototype.nodeIndex=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),""+t+(t?this.INDEX_SEPARATOR:"")+e},a.prototype.indexForLevel=function(e,t){return e.split(this.INDEX_SEPARATOR).slice(0,t).join(this.INDEX_SEPARATOR)},a.prototype.lastLevelIndex=function(e){void 0===e&&(e="");var t=e.split(this.INDEX_SEPARATOR);return t.length?parseInt(t[t.length-1],10):NaN},a.prototype.level=function(e){return e.split(this.INDEX_SEPARATOR).length},n.__decorate([r.Injectable()],a));function a(){this.INDEX_SEPARATOR="_"}t.IndexBuilderService=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(3),a=(s.prototype.expand=function(e,t){this.changes.next({dataItem:t,index:e,expand:!0})},s.prototype.collapse=function(e,t){this.changes.next({dataItem:t,index:e,expand:!1})},n.__decorate([r.Injectable()],s));function s(){this.changes=new o.Subject}t.ExpandStateService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(3),a=i(4),s=i(2),d=(Object.defineProperty(c.prototype,"editService",{set:function(e){this.treeview.editService=e},enumerable:!0,configurable:!0}),c.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},c.prototype.handleAdd=function(e){if(!s.isPresent(this.treeview.editService))throw new Error("No `editService` provided. Either provide your own implementation or use this directive in combination with one of the data binding directives (`kendoTreeViewHierarchyBinding` or `kendoTreeViewFlatDataBinding`).");this.treeview.editService.add(e)},c.prototype.handleRemove=function(e){if(!s.isPresent(this.treeview.editService))throw new Error("No `editService` provided. Either provide your own implementation or use this directive in combination with one of the data binding directives (`kendoTreeViewHierarchyBinding` or `kendoTreeViewFlatDataBinding`).");this.treeview.editService.remove(e)},n.__decorate([r.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],c.prototype,"editService",null),n.__decorate([r.Directive({selector:"[kendoTreeViewDragAndDropEditing]"}),n.__metadata("design:paramtypes",[a.TreeViewComponent])],c));function c(e){this.treeview=e,this.subscriptions=new o.Subscription,this.subscriptions.add(this.treeview.addItem.subscribe(this.handleAdd.bind(this))),this.subscriptions.add(this.treeview.removeItem.subscribe(this.handleRemove.bind(this)))}t.DragAndDropEditingDirective=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),u=i(6),o=i(41),a=i(40),s=i(39),d=i(10),c=i(9),h=i(18),f=i(2),p=i(4),l=i(7),m=(v.prototype.ngAfterContentInit=function(){this.initalizeDraggable(),this.dragClueService.initialize(this.treeview.assetsContainer,this.dragClueTemplate&&this.dragClueTemplate.templateRef),this.dropHintService.initialize(this.treeview.assetsContainer,this.dropHintTemplate&&this.dropHintTemplate.templateRef)},v.prototype.ngOnDestroy=function(){this.draggable.destroy()},v.prototype.handlePress=function(e){var t=this,i=e.originalEvent;if(f.isContent(i.target)){var n=h.getDropTarget(i);if(u.hasObservers(this.treeview.nodeDragStart)&&this.zone.run(function(){return t.notifyDragStart(i,n)}).isDefaultPrevented())return;this.draggedItem=f.closestWithMatch(i.target,".k-in"),this.dragClueService.cancelReturnAnimation(),this.dragClueService.updateText(this.draggedItem.innerText),this.containerOffset=h.getContainerOffset(this.draggedItem)}},v.prototype.handleDrag=function(e){var t=this,i=e.originalEvent,n=e.clientX,r=e.clientY;if(f.isPresent(this.draggedItem)){var o=h.getDropTarget(i);u.hasObservers(this.treeview.nodeDrag)&&this.zone.run(function(){return t.notifyDrag(i,o)});var a=this.getTargetTreeView(o),s=h.getDropPosition(this.draggedItem,o,r,a,this.containerOffset),d=f.closestWithMatch(o,".k-mid");this.updateDropHintState(s,d);var c=h.getDropAction(s,o),p=h.treeItemFromEventTarget(this.treeview,this.draggedItem),l=h.treeItemFromEventTarget(a,o);this.updateDragClueState(c,n,r,p,l)}},v.prototype.handleRelease=function(e){var t=this,i=e.originalEvent,n=e.clientY;if(f.isPresent(this.draggedItem)){var r=h.getDropTarget(i),o=this.treeview,a=this.getTargetTreeView(r),s=h.getDropPosition(this.draggedItem,r,n,this.getTargetTreeView(r),this.containerOffset),d=h.treeItemFromEventTarget(o,this.draggedItem),c=h.treeItemFromEventTarget(a,r);f.isPresent(c)&&f.isPresent(s)?this.zone.run(function(){return t.notifyDrop({sourceItem:d,destinationItem:c,dropPosition:s,sourceTree:o,destinationTree:a},i)}):this.dragClueService.animateDragClueToElementPosition(this.draggedItem),u.hasObservers(this.treeview.nodeDragEnd)&&this.zone.run(function(){return t.notifyDragEnd({sourceItem:d,destinationItem:c,originalEvent:i})}),this.dropHintService.hide(),this.draggedItem=null}},v.prototype.updateDropHintState=function(e,t){if(f.isPresent(t)&&e!==l.DropPosition.Over&&f.isPresent(e)){var i=t.getBoundingClientRect(),n=e===l.DropPosition.Before?i.top:i.top+i.height;this.dropHintService.move(i.left-this.containerOffset.left,n-this.containerOffset.top),this.dropHintService.show()}else this.dropHintService.hide()},v.prototype.updateDragClueState=function(e,t,i,n,r){this.dragClueService.move(t-this.containerOffset.left,i-this.containerOffset.top),this.dragClueService.updateDragClueData(e,n,r),this.dragClueService.show()},v.prototype.initalizeDraggable=function(){var e=this;this.draggable=new o.default({press:this.handlePress.bind(this),drag:this.handleDrag.bind(this),release:this.handleRelease.bind(this)}),this.zone.runOutsideAngular(function(){return e.draggable.bindTo(e.element.nativeElement)})},v.prototype.notifyDragStart=function(e,t){var i=h.treeItemFromEventTarget(this.treeview,t),n=new l.TreeItemDragStartEvent({sourceItem:i,originalEvent:e});return this.treeview.nodeDragStart.emit(n),n},v.prototype.notifyDrag=function(e,t){var i={sourceItem:h.treeItemFromEventTarget(this.treeview,this.draggedItem),destinationItem:h.treeItemFromEventTarget(this.getTargetTreeView(t),t),originalEvent:e};this.treeview.nodeDrag.emit(i)},v.prototype.notifyDrop=function(e,t){var i=new l.TreeItemDropEvent(e,t);e.destinationTree.nodeDrop.emit(i),this.disableAnimationsForNextTick(e.destinationTree),e.sourceTree!==e.destinationTree&&this.disableAnimationsForNextTick(e.sourceTree),!i.isDefaultPrevented()&&i.isValid?(this.dragClueService.hide(),e.destinationTree.addItem.emit(e),t.ctrlKey&&this.allowCopy||e.sourceTree.removeItem.emit(e)):i.isDefaultPrevented()?this.dragClueService.hide():i.isValid||this.dragClueService.animateDragClueToElementPosition(this.draggedItem)},v.prototype.notifyDragEnd=function(e){this.treeview.nodeDragEnd.emit(e)},v.prototype.getTargetTreeView=function(e){var t=this.treeview.element.nativeElement.tagName,i=f.closestWithMatch(e,t);return[this.treeview].concat(this.dropZoneTreeViews).find(function(e){return f.isPresent(e)&&e.element.nativeElement===i})},v.prototype.disableAnimationsForNextTick=function(e){e.animate||(e.animate=!1,this.zone.runOutsideAngular(function(){return setTimeout(function(){return e.animate=!0})}))},n.__decorate([r.Input(),n.__metadata("design:type",Boolean)],v.prototype,"allowCopy",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Array)],v.prototype,"dropZoneTreeViews",void 0),n.__decorate([r.ContentChild(d.DragClueTemplateDirective),n.__metadata("design:type",d.DragClueTemplateDirective)],v.prototype,"dragClueTemplate",void 0),n.__decorate([r.ContentChild(c.DropHintTemplateDirective),n.__metadata("design:type",c.DropHintTemplateDirective)],v.prototype,"dropHintTemplate",void 0),n.__decorate([r.HostBinding("style.user-select"),r.HostBinding("style.-ms-user-select"),n.__metadata("design:type",String)],v.prototype,"userSelectStyle",void 0),n.__decorate([r.Directive({selector:"[kendoTreeViewDragAndDrop]",providers:[a.DragClueService,s.DropHintService]}),n.__metadata("design:paramtypes",[r.ElementRef,r.NgZone,p.TreeViewComponent,a.DragClueService,s.DropHintService])],v));function v(e,t,i,n,r){this.element=e,this.zone=t,this.treeview=i,this.dragClueService=n,this.dropHintService=r,this.allowCopy=!1,this.dropZoneTreeViews=[],this.userSelectStyle="none",this.containerOffset={top:0,left:0},this.treeview.touchActions=!1}t.DragAndDropDirective=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(6),a=i(8),s=i(3),d=i(47),c=i(4),p=i(2),l=i(46),u=(Object.defineProperty(h.prototype,"nodes",{set:function(e){if(this.originalData=e||[],p.isNullOrEmptyString(this.parentIdField))this.treeView.nodes=this.originalData.slice(0);else{var t=a.getter(this.parentIdField);this.treeView.nodes=this.originalData.filter(d.compose(p.isBlank,t))}},enumerable:!0,configurable:!0}),h.prototype.ngOnInit=function(){var r=this;if(p.isPresent(this.parentIdField)&&p.isPresent(this.idField)){var t=function(e){return t=a.getter(r.parentIdField),i=r.originalData||[],n=a.getter(r.idField)(e),i.filter(function(e){return t(e)===n});var t,i,n};this.treeView.hasChildren=function(e){return 0<t(e).length},this.treeView.children=function(e){return s.of(t(e))},this.treeView.editService=new l.FlatEditingService(this)}},h.prototype.ngOnChanges=function(e){o.isChanged("parentIdField",e,!1)&&(this.nodes=this.originalData)},n.__decorate([r.Input(),n.__metadata("design:type",Array),n.__metadata("design:paramtypes",[Array])],h.prototype,"nodes",null),n.__decorate([r.Input(),n.__metadata("design:type",String)],h.prototype,"parentIdField",void 0),n.__decorate([r.Input(),n.__metadata("design:type",String)],h.prototype,"idField",void 0),n.__decorate([r.Directive({selector:"[kendoTreeViewFlatDataBinding]"}),n.__metadata("design:paramtypes",[c.TreeViewComponent])],h));function h(e){this.treeView=e,this.originalData=[]}t.FlatDataBindingDirective=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),u=i(2),h=i(7),r=function(){if(!n.isDocumentAvailable())return!1;var e=document.createElement("div");e.style.transform="matrix(10, 0, 0, 10, 0, 0)",e.innerHTML='<div style="position: fixed; top: 10px;">child</div>',document.body.appendChild(e);var t=10!==e.children[0].getBoundingClientRect().top;return document.body.removeChild(e),t}();t.getContainerOffset=function(e){if(!e||!r)return{left:0,top:0};for(var t=e.parentElement;t&&"none"===window.getComputedStyle(t).transform;)t=t.parentElement;if(t){var i=t.getBoundingClientRect();return{left:i.left-t.scrollLeft,top:i.top-t.scrollTop}}return{left:0,top:0}},t.getDropAction=function(e,t){if(!u.isPresent(e)||!u.isPresent(t))return h.DropAction.Invalid;switch(e){case h.DropPosition.Over:return h.DropAction.Add;case h.DropPosition.Before:return u.isPresent(u.closestNode(t).previousElementSibling)?h.DropAction.InsertMiddle:h.DropAction.InsertTop;case h.DropPosition.After:return u.isPresent(u.closestNode(t).nextElementSibling)?h.DropAction.InsertMiddle:h.DropAction.InsertBottom;default:return h.DropAction.Invalid}},t.getDropPosition=function(e,t,i,n,r){if(u.isPresent(e)&&u.isPresent(t)&&u.isPresent(n)&&u.isPresent(r)){var o=u.closestWithMatch(t,".k-mid");if(u.isPresent(o)){var a=o.querySelector(".k-in"),s=u.hasParent(o,u.closestNode(e));if(u.isPresent(a)&&a!==e&&!s){var d=a.getBoundingClientRect(),c=d.height/(u.isContent(t)?4:2),p=i-r.top,l=d.top-r.top;return p<l+c?h.DropPosition.Before:p>=l+d.height-c?h.DropPosition.After:h.DropPosition.Over}}}},t.treeItemFromEventTarget=function(e,t){if(u.isPresent(e)&&u.isPresent(t)){var i=u.closestNode(t),n=u.nodeId(i);return e.itemLookup(n)}},t.collapseEmptyParent=function(e,t,i){u.isPresent(e)&&0===t.length&&i.isExpanded(e.item.dataItem,e.item.index)&&i.collapseNode(e.item.dataItem,e.item.index)},t.expandDropTarget=function(e,t){t.isExpanded(e.item.dataItem,e.item.index)||t.expandNode(e.item.dataItem,e.item.index)},t.getDropTarget=function(e){return n.isDocumentAvailable()&&u.isPresent(document.elementFromPoint)?document.elementFromPoint(e.clientX,e.clientY):e.target}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(r.prototype.preventDefault=function(){this.prevented=!0},r.prototype.isDefaultPrevented=function(){return this.prevented},r);function r(){this.prevented=!1}t.PreventableEvent=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(8),a=i(4),s=i(2),d=i(3),c=i(49),p=(Object.defineProperty(l.prototype,"childrenField",{get:function(){return this._childrenField},set:function(e){if(!e)throw new Error("'childrenField' cannot be empty");this._childrenField=e},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var i=this;s.isPresent(this.childrenField)&&(this.treeView.children=function(e){return d.of(o.getter(i.childrenField)(e))},this.treeView.hasChildren=function(e){var t=o.getter(i.childrenField)(e);return Boolean(t&&t.length)},this.treeView.editService=new c.HierarchyEditingService(this))},n.__decorate([r.Input(),n.__metadata("design:type",String),n.__metadata("design:paramtypes",[String])],l.prototype,"childrenField",null),n.__decorate([r.Directive({selector:"[kendoTreeViewHierarchyBinding]"}),n.__metadata("design:paramtypes",[a.TreeViewComponent])],l));function l(e){this.treeView=e}t.HierarchyBindingDirective=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(4),a=i(2),s=i(3),d=(Object.defineProperty(c.prototype,"isSelected",{set:function(e){this.treeView.isSelected=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selectedKeys",{get:function(){return this._selectedKeys},set:function(e){this._selectedKeys=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"getAriaMultiselectable",{get:function(){return"multiple"===this.options.mode},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){var e={enabled:!0,mode:"single"};if(!a.isPresent(this.selection)||"string"==typeof this.selection)return e;var t="boolean"==typeof this.selection?{enabled:this.selection}:this.selection;return Object.assign(e,t)},enumerable:!0,configurable:!0}),c.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},c.prototype.itemKey=function(e){return this.selectKey?"string"==typeof this.selectKey?e.dataItem[this.selectKey]:"function"==typeof this.selectKey?this.selectKey(e):void 0:e.index},c.prototype.select=function(e){var t=this.options,i=t.enabled,n=t.mode,r=this.selectActions[n]||a.noop;i&&r(e)},c.prototype.selectSingle=function(e){var t=this.itemKey(e);this.selectedKeys[0]!==t&&(this.selectedKeys=[t],this.notify())},c.prototype.selectMultiple=function(e){var t=this.itemKey(e),i=this.selectedKeys.indexOf(t),n=-1<i;a.isPresent(t)&&(n?this.selectedKeys.splice(i,1):this.selectedKeys.push(t),this.notify())},c.prototype.notify=function(){this.selectedKeysChange.emit(this.selectedKeys.slice())},n.__decorate([r.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],c.prototype,"isSelected",null),n.__decorate([r.Input("selectBy"),n.__metadata("design:type",Object)],c.prototype,"selectKey",void 0),n.__decorate([r.Input("kendoTreeViewSelectable"),n.__metadata("design:type",Object)],c.prototype,"selection",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Array),n.__metadata("design:paramtypes",[Array])],c.prototype,"selectedKeys",null),n.__decorate([r.Output(),n.__metadata("design:type",r.EventEmitter)],c.prototype,"selectedKeysChange",void 0),n.__decorate([r.HostBinding("attr.aria-multiselectable"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[])],c.prototype,"getAriaMultiselectable",null),n.__decorate([r.Directive({selector:"[kendoTreeViewSelectable]"}),n.__metadata("design:paramtypes",[o.TreeViewComponent])],c));function c(e){var i=this;this.treeView=e,this.selectedKeysChange=new r.EventEmitter,this.subscriptions=new s.Subscription,this.selectActions={multiple:function(e){return i.selectMultiple(e)},single:function(e){return i.selectSingle(e)}},this._selectedKeys=[],this.subscriptions.add(this.treeView.selectionChange.subscribe(this.select.bind(this))),this.treeView.isSelected=function(e,t){return-1<i.selectedKeys.indexOf(i.itemKey({dataItem:e,index:t}))}}t.SelectDirective=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(4),a=i(3),s=i(5),d=(Object.defineProperty(c.prototype,"isExpanded",{set:function(e){this.treeView.isExpanded=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"expandedKeys",{get:function(){return this._expandedKeys},set:function(e){this._expandedKeys=e},enumerable:!0,configurable:!0}),c.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},c.prototype.itemKey=function(e){if(this.expandKey){if("string"==typeof this.expandKey)return e.dataItem[this.expandKey];if("function"==typeof this.expandKey)return this.expandKey(e)}return e.index},c.prototype.toggleExpand=function(e){var t=e.index,i=e.dataItem,n=e.expand,r=this.itemKey({index:t,dataItem:i}),o=this.expandedKeys.indexOf(r),a=!1;-1<o&&!n?(this.expandedKeys.splice(o,1),a=!0):-1===o&&n&&(this.expandedKeys.push(r),a=!0),a&&this.expandedKeysChange.emit(this.expandedKeys)},n.__decorate([r.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],c.prototype,"isExpanded",null),n.__decorate([r.Input("expandBy"),n.__metadata("design:type",Object)],c.prototype,"expandKey",void 0),n.__decorate([r.Output(),n.__metadata("design:type",r.EventEmitter)],c.prototype,"expandedKeysChange",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Array),n.__metadata("design:paramtypes",[Array])],c.prototype,"expandedKeys",null),n.__decorate([r.Directive({selector:"[kendoTreeViewExpandable]"}),n.__metadata("design:paramtypes",[o.TreeViewComponent])],c));function c(e){var i=this;this.treeView=e,this.expandedKeysChange=new r.EventEmitter,this.subscriptions=new a.Subscription,this._expandedKeys=[],this.subscriptions.add(a.merge(this.treeView.expand.pipe(s.map(function(e){return n.__assign({expand:!0},e)})),this.treeView.collapse.pipe(s.map(function(e){return n.__assign({expand:!1},e)}))).subscribe(this.toggleExpand.bind(this))),this.treeView.isExpanded=function(e,t){return-1<i.expandedKeys.indexOf(i.itemKey({dataItem:e,index:t}))}}t.ExpandDirective=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(4),a=(Object.defineProperty(s.prototype,"isDisabled",{set:function(e){this.treeView.isDisabled=e},enumerable:!0,configurable:!0}),s.prototype.ngOnChanges=function(e){void 0===e&&(e={});var t=e.disabledKeys;t&&!t.firstChange&&this.cdr.markForCheck()},s.prototype.itemKey=function(e){return this.disableKey?"string"==typeof this.disableKey?e.dataItem[this.disableKey]:"function"==typeof this.disableKey?this.disableKey(e):void 0:e.index},n.__decorate([r.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],s.prototype,"isDisabled",null),n.__decorate([r.Input("kendoTreeViewDisable"),n.__metadata("design:type",Object)],s.prototype,"disableKey",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Array)],s.prototype,"disabledKeys",void 0),n.__decorate([r.Directive({selector:"[kendoTreeViewDisable]"}),n.__metadata("design:paramtypes",[o.TreeViewComponent,r.ChangeDetectorRef])],s));function s(e,t){var i=this;this.treeView=e,this.cdr=t,this.disabledKeys=[],this.treeView.isDisabled=function(e,t){return-1<i.disabledKeys.indexOf(i.itemKey({dataItem:e,index:t}))}}t.DisableDirective=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(4),s=i(2),a=i(3),d=i(5),c=(Object.defineProperty(p.prototype,"isChecked",{set:function(e){this.treeView.isChecked=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"checkedKeys",{get:function(){return this._checkedKeys},set:function(e){this._checkedKeys=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"options",{get:function(){var e={checkChildren:!0,checkParents:!0,enabled:!0,mode:"multiple"};if(!s.isPresent(this.checkable)||"string"==typeof this.checkable)return e;var t="boolean"==typeof this.checkable?{enabled:this.checkable}:this.checkable;return Object.assign(e,t)},enumerable:!0,configurable:!0}),p.prototype.ngOnChanges=function(e){e.checkable&&(this.treeView.checkboxes=this.options.enabled,this.toggleCheckOnClick())},p.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe(),this.unsubscribeClick()},p.prototype.isItemChecked=function(e,t){return this.checkKey?-1<this.checkedKeys.indexOf(this.itemKey({dataItem:e,index:t}))?"checked":"none":this.isIndexChecked(t)},p.prototype.isIndexChecked=function(e){var r,t,i=this.checkedKeys.filter((r=e,function(e){return r===e||!!e.split&&e.split("_").reduce(function(e,t){var i=e.key,n=e.result;return r===(i+=t)||n?{result:!0}:{key:i+="_",result:!1}},{key:"",result:!1}).result}));if(t=e,0<i.filter(function(e){return e===t}).length)return"checked";var n=this.options,o=n.mode,a=n.checkParents;return"multiple"===o&&a&&i.length?"indeterminate":"none"},p.prototype.itemKey=function(e){return this.checkKey?"string"==typeof this.checkKey?e.dataItem[this.checkKey]:"function"==typeof this.checkKey?this.checkKey(e):void 0:e.index},p.prototype.check=function(e){var t=this.options,i=t.enabled,n=t.mode,r=this.checkActions[n]||s.noop;i&&r(e)},p.prototype.checkSingle=function(e){var t=this.itemKey(e.item);this.checkedKeys=this.checkedKeys[0]!==t?[t]:[],this.notify()},p.prototype.checkMultiple=function(e){this.checkNode(e),this.options.checkParents&&this.checkParents(e.parent),this.notify()},p.prototype.toggleCheckOnClick=function(){var i=this;this.unsubscribeClick(),this.options.checkOnClick&&(this.clickSubscription=this.treeView.nodeClick.subscribe(function(e){if("click"===e.type){var t=i.treeView.itemLookup(e.item.index);i.check(t)}}))},p.prototype.unsubscribeClick=function(){this.clickSubscription&&(this.clickSubscription.unsubscribe(),this.clickSubscription=null)},p.prototype.checkNode=function(e,t){var i=this,n=this.itemKey(e.item),r=this.checkedKeys.indexOf(n),o=-1<r,a=void 0===t?!o:t;!s.isPresent(n)||o&&t||this.treeView.isDisabledNode(e)||(o?this.checkedKeys.splice(r,1):this.checkedKeys.push(n),this.options.checkChildren&&e.children.map(function(e){return i.checkNode(e,a)}))},p.prototype.checkParents=function(e){for(var t=e;t;){var i=this.itemKey(t.item),n=this.checkedKeys.indexOf(i);this.allChildrenSelected(t.children)?-1===n&&this.checkedKeys.push(i):-1<n&&this.checkedKeys.splice(n,1),t=t.parent}},p.prototype.allChildrenSelected=function(e){var i=this;return e.reduce(function(e,t){return e&&"checked"===i.isItemChecked(t.dataItem,t.index)},!0)},p.prototype.notify=function(){this.checkedKeysChange.emit(this.checkedKeys.slice())},p.prototype.addChildrenKeys=function(e){var n=this;if(-1!==this.checkedKeys.indexOf(this.itemKey(e.item))){var t=e.children.reduce(function(e,t){var i=n.itemKey(t);return n.checkedKeys.find(function(e){return i===e})||e.push(i),e},[]);t.length&&(this.checkedKeys=this.checkedKeys.concat(t),this.zone.run(function(){n.notify()}))}},n.__decorate([r.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],p.prototype,"isChecked",null),n.__decorate([r.Input("checkBy"),n.__metadata("design:type",Object)],p.prototype,"checkKey",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Array),n.__metadata("design:paramtypes",[Array])],p.prototype,"checkedKeys",null),n.__decorate([r.Input("kendoTreeViewCheckable"),n.__metadata("design:type",Object)],p.prototype,"checkable",void 0),n.__decorate([r.Output(),n.__metadata("design:type",r.EventEmitter)],p.prototype,"checkedKeysChange",void 0),n.__decorate([r.Directive({selector:"[kendoTreeViewCheckable]"}),n.__metadata("design:paramtypes",[o.TreeViewComponent,r.NgZone])],p));function p(e,t){var i=this;this.treeView=e,this.zone=t,this.checkedKeysChange=new r.EventEmitter,this.subscriptions=new a.Subscription,this.checkActions={multiple:function(e){return i.checkMultiple(e)},single:function(e){return i.checkSingle(e)}},this._checkedKeys=[],this.subscriptions.add(this.treeView.checkedChange.subscribe(function(e){return i.check(e)})),this.subscriptions.add(this.treeView.childrenLoaded.pipe(d.filter(function(){return i.options.checkChildren}),d.switchMap(function(e){return i.zone.onStable.pipe(d.take(1),d.map(function(){return e}))})).subscribe(function(e){return i.addChildrenKeys(e)})),this.treeView.isChecked=this.isItemChecked.bind(this)}t.CheckDirective=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(2),a=/\d+$/,s=(d.prototype.registerItem=function(e,t){var i={children:[],item:e,parent:this.item(o.nodeIndex(t))};this.map.set(e.index,i)},d.prototype.registerChildren=function(e,t){var i=this.item(e);i&&(i.children=t)},d.prototype.unregisterItem=function(e,t){var i=this.item(e);i&&i.item.dataItem===t&&(this.map.delete(e),i.parent&&i.parent.children&&(i.parent.children=i.parent.children.filter(function(e){return e.dataItem!==t})))},d.prototype.replaceItem=function(e,t,i){t&&(this.unregisterItem(e,t.dataItem),this.registerItem(t,i),this.addToParent(t,i))},d.prototype.itemLookup=function(e){var t=this.item(e);return t?{children:this.mapChildren(t.children),item:t.item,parent:t.parent}:null},d.prototype.hasItem=function(e){return this.map.has(e)},d.prototype.item=function(e){return this.map.get(e)||null},d.prototype.addToParent=function(e,t){if(t){var i=this.item(t.index),n=parseInt(a.exec(e.index)[0],10);i.children=i.children||[],i.children.splice(n,0,e)}},d.prototype.mapChildren=function(e){var o=this;return void 0===e&&(e=[]),e.map(function(e){var t=o.item(e.index),i=t.item,n=t.parent,r=t.children;return{children:o.mapChildren(r),item:i,parent:n}})},n.__decorate([r.Injectable()],d));function d(){this.map=new Map}t.TreeViewLookupService=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(3),a=(s.prototype.isFirstSelected=function(e){return this.firstIndex===e},s.prototype.setFirstSelected=function(e,t){this.firstIndex===e&&!1===t?this.firstIndex=null:!this.firstIndex&&t&&(this.firstIndex=e)},s.prototype.select=function(e,t){this.changes.next({dataItem:t,index:e})},n.__decorate([r.Injectable()],s));function s(){this.changes=new o.Subject}t.SelectionService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(3),a=(s.prototype.notifyLoaded=function(e){this.changes.next(e)},n.__decorate([r.Injectable()],s));function s(){this.changes=new o.Subject}t.LoadingNotificationService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=(n.__decorate([r.HostBinding("class.k-drop-hint-container"),n.__metadata("design:type",Boolean)],a.prototype,"hostClass",void 0),n.__decorate([r.HostBinding("style.position"),n.__metadata("design:type",String)],a.prototype,"position",void 0),n.__decorate([r.HostBinding("style.pointer-events"),n.__metadata("design:type",String)],a.prototype,"pointerEvents",void 0),n.__decorate([r.Component({changeDetection:r.ChangeDetectionStrategy.OnPush,selector:"kendo-treeview-drop-hint",template:'\n        <span\n            *ngIf="!template"\n            class="k-icon k-i-drag-and-drop"\n        >\n        </span>\n\n        <ng-template\n            *ngIf="template"\n            [ngTemplateOutlet]="template"\n        >\n        <ng-template>\n    '})],a));function a(){this.hostClass=!0,this.position="fixed",this.pointerEvents="none"}t.DropHintComponent=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),r=(Object.defineProperty(o.prototype,"componentRef",{get:function(){if(!n.isPresent(this._componentRef))throw new Error("The `initalize` method must be called before calling other service methods.");return this._componentRef},set:function(e){this._componentRef=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this.componentRef.location.nativeElement},enumerable:!0,configurable:!0}),o.prototype.ngOnDestroy=function(){n.isPresent(this._componentRef)&&(this.element.parentElement.removeChild(this.element),this.componentRef.destroy(),this.componentRef=null)},o.prototype.show=function(){this.element.style.display=""},o.prototype.hide=function(){this.element.style.display="none"},o.prototype.move=function(e,t,i){void 0===i&&(i=0),this.element.style.left=e+i+"px",this.element.style.top=t+i+"px"},o);function o(){}t.DragAndDropAssetService=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(7),a=(Object.defineProperty(s.prototype,"statusIconClass",{get:function(){switch(this.action){case o.DropAction.Add:return"k-i-plus";case o.DropAction.InsertTop:return"k-i-insert-up";case o.DropAction.InsertBottom:return"k-i-insert-down";case o.DropAction.InsertMiddle:return"k-i-insert-middle";case o.DropAction.Invalid:default:return"k-i-cancel"}},enumerable:!0,configurable:!0}),s.prototype.detectChanges=function(){this.cdr.detectChanges()},n.__decorate([r.HostBinding("class.k-header"),r.HostBinding("class.k-drag-clue"),n.__metadata("design:type",Boolean)],s.prototype,"hostClasses",void 0),n.__decorate([r.HostBinding("style.position"),n.__metadata("design:type",String)],s.prototype,"posistionStyle",void 0),n.__decorate([r.Component({changeDetection:r.ChangeDetectionStrategy.OnPush,selector:"kendo-treeview-drag-clue",template:'\n        <ng-container *ngIf="!template">\n            <span class="k-icon {{statusIconClass}} k-drag-status"></span>\n            <span>{{text}}</span>\n        </ng-container>\n\n        <ng-template\n            *ngIf="template"\n            [ngTemplateOutlet]="template"\n            [ngTemplateOutletContext]="{\n                text: text,\n                action: action,\n                sourceItem: sourceItem,\n                destinationItem: destinationItem\n            }"\n        >\n        </ng-template>\n    '}),n.__metadata("design:paramtypes",[r.ChangeDetectorRef])],s));function s(e){this.cdr=e,this.hostClasses=!0,this.posistionStyle="fixed"}t.DragClueComponent=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function n(){}t.TreeItemDragEvent=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i(0),o=(n=i(19).PreventableEvent,r.__extends(a,n),a);function a(e){var t=n.call(this)||this;return Object.assign(t,e),t}t.TreeItemDragStartEvent=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i(0),o=(n=i(19).PreventableEvent,r.__extends(a,n),a.prototype.setValid=function(e){this.isValid=e},a);function a(e,t){var i=n.call(this)||this;return i.isValid=!0,Object.assign(i,e),i.originalEvent=t,i}t.TreeItemDropEvent=o},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.DropPosition||(t.DropPosition={}))[n.Over=0]="Over",n[n.Before=1]="Before",n[n.After=2]="After"},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.DropAction||(t.DropAction={}))[n.Add=0]="Add",n[n.InsertTop=1]="InsertTop",n[n.InsertBottom=2]="InsertBottom",n[n.InsertMiddle=3]="InsertMiddle",n[n.Invalid=4]="Invalid"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(3),a=(s.prototype.childrenLoaded=function(e,t){this.changes.next({item:e,children:t})},n.__decorate([r.Injectable()],s));function s(){this.changes=new o.Subject}t.NodeChildrenService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=(o.prototype.notify=function(){this.changes.emit()},o);function o(){this.changes=new n.EventEmitter}t.DataChangeNotificationService=r},function(e,t){e.exports=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i(0),o=i(1),a=i(2),s=i(28),d=(n=i(29).DragAndDropAssetService,r.__extends(c,n),c.prototype.initialize=function(e,t){a.isPresent(this._componentRef)&&this.ngOnDestroy();var i=this.componentFactoryResolver.resolveComponentFactory(s.DropHintComponent);this.componentRef=e.createComponent(i),this.hide(),this.componentRef.instance.template=t,this.componentRef.changeDetectorRef.detectChanges()},r.__decorate([o.Injectable(),r.__metadata("design:paramtypes",[o.ComponentFactoryResolver])],c));function c(e){var t=n.call(this)||this;return t.componentFactoryResolver=e,t}t.DropHintService=d},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t(0),n=t(1),o=t(30),a=t(2),s=t(29);r.CLUE_OFFSET=10,r.RETURN_ANIMATION_DURATION=200;var d,c=(d=s.DragAndDropAssetService,i.__extends(p,d),p.prototype.initialize=function(e,t){a.isPresent(this._componentRef)&&this.ngOnDestroy();var i=this.componentFactoryResolver.resolveComponentFactory(o.DragClueComponent);this.componentRef=e.createComponent(i),this.hide(),this.componentRef.instance.template=t,this.componentRef.changeDetectorRef.detectChanges()},p.prototype.ngOnDestroy=function(){this.cancelReturnAnimation(),d.prototype.ngOnDestroy.call(this)},p.prototype.move=function(e,t){d.prototype.move.call(this,e,t,r.CLUE_OFFSET)},p.prototype.animateDragClueToElementPosition=function(e){var t=this;if(a.isPresent(e)&&a.isPresent(this.element.animate)){var i=e.getBoundingClientRect(),n=this.element.getBoundingClientRect();this.returnAnimation=this.element.animate([{transform:"translate(0, 0)"},{transform:"translate("+(i.left-n.left)+"px, "+(i.top-n.top)+"px)"}],r.RETURN_ANIMATION_DURATION),this.returnAnimation.onfinish=function(){return t.hide()}}else this.hide()},p.prototype.cancelReturnAnimation=function(){a.isPresent(this.returnAnimation)&&(this.returnAnimation.cancel(),this.returnAnimation=null)},p.prototype.updateDragClueData=function(e,t,i){var n=this.componentRef.instance;e===n.action&&a.dataItemsEqual(t,n.sourceItem)&&a.dataItemsEqual(i,n.destinationItem)||(n.action=e,n.sourceItem=t,n.destinationItem=i,n.detectChanges())},p.prototype.updateText=function(e){e!==this.componentRef.instance.text&&(this.componentRef.instance.text=e,this.componentRef.instance.detectChanges())},i.__decorate([n.Injectable(),i.__metadata("design:paramtypes",[n.ComponentFactoryResolver])],p));function p(e){var t=d.call(this)||this;return t.componentFactoryResolver=e,t}r.DragClueService=c},function(e,t){e.exports=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(6),a=(Object.defineProperty(s.prototype,"classWrapper",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"indeterminate",{get:function(){return"indeterminate"===this.checkState},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checked",{get:function(){return"checked"===this.checkState},enumerable:!0,configurable:!0}),s.prototype.ngOnInit=function(){this.renderer.removeAttribute(this.element.nativeElement,"tabindex")},s.prototype.ngDoCheck=function(){this.checkState=this.isChecked(this.node,this.index)},s.prototype.handleChange=function(e){var t=e.target.checked?"checked":"none";this.checkState=t,this.changeDetector.detectChanges(),this.checkStateChange.emit(t)},n.__decorate([r.HostBinding("class.k-checkbox-wrapper"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[])],s.prototype,"classWrapper",null),n.__decorate([r.Input(),n.__metadata("design:type",String)],s.prototype,"id",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Object)],s.prototype,"isChecked",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Object)],s.prototype,"node",void 0),n.__decorate([r.Input(),n.__metadata("design:type",String)],s.prototype,"index",void 0),n.__decorate([r.Input(),n.__metadata("design:type",String)],s.prototype,"labelText",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Number)],s.prototype,"tabindex",void 0),n.__decorate([r.Output(),n.__metadata("design:type",r.EventEmitter)],s.prototype,"checkStateChange",void 0),n.__decorate([r.Component({selector:"kendo-checkbox",template:'\n        <input\n            class="k-checkbox"\n            type="checkbox"\n            [id]="id"\n            [checked]="checked"\n            [indeterminate]="indeterminate"\n            [tabindex]="tabindex"\n            (change)="handleChange($event)"\n        />\n        <label\n            class="k-checkbox-label"\n            tabindex="-1"\n            [for]="id"\n        >{{labelText}}</label>\n    '}),n.__metadata("design:paramtypes",[r.ElementRef,r.Renderer2,r.ChangeDetectorRef])],s));function s(e,t,i){this.element=e,this.renderer=t,this.changeDetector=i,this.id="_"+o.guid(),this.tabindex=0,this.checkStateChange=new r.EventEmitter,this.checkState="none"}t.CheckBoxComponent=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=[i(42).CheckBoxComponent],a=n.__decorate([r.NgModule({declarations:[o],exports:[o]})],s);function s(){}t.CheckBoxModule=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(12),a=i(26),s=i(3),d=i(5),c=(p.prototype.ngOnChanges=function(e){e.initialSelection&&this.updateSelection(this.initialSelection)},p.prototype.ngOnInit=function(){this.updateSelection(this.initialSelection)},p.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},p.prototype.updateItem=function(){this.render(this.navigationService.isActive(this.index),"k-state-focused")},p.prototype.updateSelection=function(e){this.render(e,"k-state-selected")},p.prototype.render=function(e,t){var i=e?"addClass":"removeClass";this.renderer[i](this.element.nativeElement,t)},n.__decorate([r.Input(),n.__metadata("design:type",Object)],p.prototype,"dataItem",void 0),n.__decorate([r.Input(),n.__metadata("design:type",String)],p.prototype,"index",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Boolean)],p.prototype,"initialSelection",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],p.prototype,"isSelected",void 0),n.__decorate([r.Directive({selector:"[kendoTreeViewItemContent]"}),n.__metadata("design:paramtypes",[r.ElementRef,o.NavigationService,a.SelectionService,r.Renderer2])],p));function p(e,t,i,n){var r=this;this.element=e,this.navigationService=t,this.selectionService=i,this.renderer=n,this.initialSelection=!1,this.subscriptions=new s.Subscription,this.subscriptions.add(this.navigationService.moves.subscribe(this.updateItem.bind(this))),this.subscriptions.add(this.navigationService.selects.pipe(d.filter(function(e){return e===r.index})).subscribe(function(e){return r.selectionService.select(e,r.dataItem)})),this.subscriptions.add(this.selectionService.changes.subscribe(function(){r.updateSelection(r.isSelected(r.dataItem,r.index))}))}t.TreeViewItemContentDirective=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){return{dataItem:t,index:e}}var r=i(0),o=i(1),a=i(12),s=i(26),d=i(14),c=i(13),p=i(25),l=i(2),u=i(5),h=0,f=(Object.defineProperty(m.prototype,"isChecked",{set:function(e){this.ariaChecked="checked"===e?"true":"indeterminate"===e?"mixed":"false"},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"isExpanded",{get:function(){return this._isExpanded||!1},set:function(e){this._isExpanded=e},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"isSelected",{get:function(){return this._isSelected||!1},set:function(e){this._isSelected=e},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"treeItem",{get:function(){return n(this.index,this.dataItem)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"parentTreeItem",{get:function(){return this.parentDataItem?n(this.parentIndex,this.parentDataItem):null},enumerable:!0,configurable:!0}),m.prototype.ngOnInit=function(){this.lookupService.registerItem(this.treeItem,this.parentTreeItem),this.registerNavigationItem(),this.isInitialized=!0,this.setAttribute("role","treeitem"),this.setAriaAttributes(),this.setDisabledClass(),this.updateTabIndex()},m.prototype.ngOnChanges=function(e){var t=e.index,i=e.isDisabled;(t||e.isChecked||e.isExpanded||e.isSelected)&&this.setAriaAttributes(),i&&this.setDisabledClass(),this.moveLookupItem(e),this.moveNavigationItem(t),this.disableNavigationItem(i)},m.prototype.ngOnDestroy=function(){this.navigationService.unregisterItem(this.id,this.index),this.lookupService.unregisterItem(this.index,this.dataItem),this.subscriptions=this.subscriptions.reduce(function(e,t){return t.unsubscribe(),e},[])},m.prototype.subscribe=function(){var i=this;this.subscriptions=[this.navigationService.moves.subscribe(function(){i.updateTabIndex(),i.focusItem()}),this.navigationService.expands.pipe(u.filter(function(e){return e.index===i.index&&!i.isDisabled})).subscribe(function(e){var t=e.expand;return i.expand(t)})]},m.prototype.registerNavigationItem=function(){this.navigationService.registerItem(this.id,this.index,this.isDisabled),this.activateItem()},m.prototype.activateItem=function(){if(!this.isDisabled){var e=this.navigationService,t=this.selectionService,i=this.index;t.setFirstSelected(i,this.isSelected),!e.isActive(i)&&t.isFirstSelected(i)&&e.activateIndex(i)}},m.prototype.expand=function(e){this.expandService[e?"expand":"collapse"](this.index,this.dataItem)},m.prototype.isFocusable=function(){return!this.isDisabled&&this.navigationService.isFocusable(this.index)},m.prototype.focusItem=function(){this.isInitialized&&this.navigationService.isActive(this.index)&&this.element.nativeElement.focus()},m.prototype.moveLookupItem=function(e){void 0===e&&(e={});var t=e.dataItem,i=e.index,n=e.parentDataItem,r=e.parentIndex;if((!i||!i.firstChange)&&(t||i||n||r)){var o=(i||{}).previousValue||this.index;this.lookupService.replaceItem(o,this.treeItem,this.parentTreeItem)}},m.prototype.moveNavigationItem=function(e){void 0===e&&(e={});var t=e.currentValue,i=e.firstChange,n=e.previousValue;!i&&l.isPresent(t)&&l.isPresent(n)&&(this.navigationService.unregisterItem(this.id,n),this.navigationService.registerItem(this.id,t,this.isDisabled))},m.prototype.disableNavigationItem=function(e){if(e&&!e.firstChange){var t=this.navigationService;this.isDisabled?t.activateClosest(this.index):t.activateFocusable(),t.unregisterItem(this.id,this.index),t.registerItem(this.id,this.index,this.isDisabled)}},m.prototype.setAriaAttributes=function(){this.setAttribute("aria-level",this.ib.level(this.index).toString()),this.setAttribute("aria-expanded",this.isExpanded.toString()),this.setAttribute("aria-selected",this.isSelected.toString()),this.setAttribute("aria-checked",this.ariaChecked)},m.prototype.setDisabledClass=function(){this.setClass("k-state-disabled",this.isDisabled)},m.prototype.setClass=function(e,t){var i=t?"addClass":"removeClass";this.renderer[i](this.element.nativeElement,e)},m.prototype.updateTabIndex=function(){this.setAttribute("tabIndex",this.isFocusable()?"0":"-1")},m.prototype.setAttribute=function(e,t){this.renderer.setAttribute(this.element.nativeElement,e,t)},r.__decorate([o.Input(),r.__metadata("design:type",Object)],m.prototype,"dataItem",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],m.prototype,"index",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Object)],m.prototype,"parentDataItem",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],m.prototype,"parentIndex",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[String])],m.prototype,"isChecked",null),r.__decorate([o.Input(),r.__metadata("design:type",Boolean)],m.prototype,"isDisabled",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[Boolean])],m.prototype,"isExpanded",null),r.__decorate([o.Input(),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[Boolean])],m.prototype,"isSelected",null),r.__decorate([o.Directive({selector:"[kendoTreeViewItem]"}),r.__metadata("design:paramtypes",[o.ElementRef,d.ExpandStateService,a.NavigationService,s.SelectionService,p.TreeViewLookupService,o.Renderer2,c.IndexBuilderService])],m));function m(e,t,i,n,r,o,a){this.element=e,this.expandService=t,this.navigationService=i,this.selectionService=n,this.lookupService=r,this.renderer=o,this.ib=a,this.isDisabled=!1,this.ariaChecked="false",this.id=h++,this.isInitialized=!1,this.subscriptions=[],this.subscribe()}t.TreeViewItemDirective=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(8),h=i(7),f=i(18),r=i(5),n=(o.prototype.add=function(e){var t=e.sourceItem,i=e.destinationItem,n=e.dropPosition,r=e.sourceTree,o=e.destinationTree,a=i.item.dataItem,s=Object.assign({},t.item.dataItem);if(n===h.DropPosition.Over){f.expandDropTarget(i,o);var d=u.getter(this.flatBinding.idField)(a);u.setter(this.flatBinding.parentIdField)(s,d),this.flatBinding.originalData.push(s)}else{var c=n===h.DropPosition.After?1:0,p=this.flatBinding.originalData.indexOf(a)+c;this.flatBinding.originalData.splice(p,0,s);var l=u.getter(this.flatBinding.parentIdField)(a);u.setter(this.flatBinding.parentIdField)(s,l)}r!==o&&this.addChildNodes(s,r),this.flatBinding.nodes=this.flatBinding.originalData},o.prototype.remove=function(e){var t=e.sourceItem,i=e.sourceTree,n=e.destinationTree,r=t.item.dataItem,o=this.flatBinding.originalData.indexOf(r);this.flatBinding.originalData.splice(o,1),i!==n&&this.removeChildNodes(r,i),this.flatBinding.nodes=this.flatBinding.originalData;var a=t.parent?t.parent.children:[];f.collapseEmptyParent(t.parent,a,i)},o.prototype.addChildNodes=function(e,t){var i,n=this.fetchAllDescendantNodes(e,t);(i=this.flatBinding.originalData).push.apply(i,n)},o.prototype.removeChildNodes=function(e,t){var i=this;this.fetchAllDescendantNodes(e,t).forEach(function(e){var t=i.flatBinding.originalData.indexOf(e);i.flatBinding.originalData.splice(t,1)})},o.prototype.fetchAllDescendantNodes=function(e,t){var i=this;if(!e)return[];var n=[];return t.children(e).pipe(r.take(1)).subscribe(function(e){n=n.concat(e||[]),e.forEach(function(e){return n=n.concat(i.fetchAllDescendantNodes(e,t)||[])})}),n},o);function o(e){this.flatBinding=e}t.FlatEditingService=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(14),a=i(27),s=i(3),d=i(5),c=(Object.defineProperty(p.prototype,"loading",{get:function(){return this._loading},set:function(e){this._loading=e,this.cd.markForCheck()},enumerable:!0,configurable:!0}),p.prototype.ngOnInit=function(){var t=this,i=this.loadingService.changes.pipe(d.filter(function(e){return e===t.index}));this.subscription=this.expandService.changes.pipe(d.filter(function(e){return e.index===t.index}),d.tap(function(e){!e.expand&&t.loading&&(t.loading=!1)}),d.filter(function(e){return e.expand}),d.switchMap(function(e){return s.of(e).pipe(d.delay(100),d.takeUntil(i))})).subscribe(function(){return t.loading=!0}),this.subscription.add(i.subscribe(function(){return t.loading=!1}))},p.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},n.__decorate([r.HostBinding("class.k-i-loading"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[Boolean])],p.prototype,"loading",null),n.__decorate([r.Input("kendoTreeViewLoading"),n.__metadata("design:type",String)],p.prototype,"index",void 0),n.__decorate([r.Directive({selector:"[kendoTreeViewLoading]"}),n.__metadata("design:paramtypes",[o.ExpandStateService,a.LoadingNotificationService,r.ChangeDetectorRef])],p));function p(e,t,i){this.expandService=e,this.loadingService=t,this.cd=i,this._loading=!1}t.LoadingIndicatorDirective=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(8),u=i(7),h=i(18),n=(r.prototype.add=function(e){var t=e.sourceItem,i=e.destinationItem,n=e.dropPosition,r=e.destinationTree,o=i.item.dataItem,a=Object.assign({},t.item.dataItem);if(n===u.DropPosition.Over){h.expandDropTarget(i,r);var s=l.getter(this.hierarchyBinding.childrenField)(o)||[];s.push(a),l.setter(this.hierarchyBinding.childrenField)(o,s)}else{var d=this.getParentNodes(i,r),c=n===u.DropPosition.After?1:0,p=d.indexOf(o)+c;d.splice(p,0,a)}},r.prototype.remove=function(e){var t=e.sourceItem,i=e.sourceTree,n=this.getParentNodes(t,i),r=n.indexOf(t.item.dataItem);n.splice(r,1),h.collapseEmptyParent(t.parent,n,i)},r.prototype.getParentNodes=function(e,t){return e.parent?l.getter(this.hierarchyBinding.childrenField)(e.parent.item.dataItem):t.nodes},r);function r(e){this.hierarchyBinding=e}t.HierarchyEditingService=n},function(e,t){e.exports=h},function(e,t){e.exports=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(51),a=i(8),s=i(14),d=i(13),c=i(25),p=i(12),l=i(36),u=i(2),h=i(27),f=i(3),m=i(5),v=i(37),g=(Object.defineProperty(y.prototype,"role",{get:function(){return"group"},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e;var t=this.mapToTreeItem(e);this.setNodeChildren(t),this.emitChildrenLoaded(t)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"hasTemplate",{get:function(){return u.isPresent(this.nodeTemplateRef)},enumerable:!0,configurable:!0}),y.prototype.expandNode=function(e,t,i){i?this.expandService.expand(e,t):this.expandService.collapse(e,t)},y.prototype.checkNode=function(e){this.navigationService.checkIndex(e),this.navigationService.activateIndex(e)},y.prototype.nodeIndex=function(e){return this.indexBuilder.nodeIndex(e.toString(),this.parentIndex)},y.prototype.nodeText=function(e){var t=u.isArray(this.textField)?this.textField[0]:this.textField;return a.getter(t)(e)},y.prototype.ngOnDestroy=function(){this.nodesSubscription&&this.nodesSubscription.unsubscribe(),this.dataChangeSubscription&&this.dataChangeSubscription.unsubscribe()},y.prototype.ngOnInit=function(){this.subscribeToNodesChange(),this.dataChangeSubscription=this.dataChangeNotification.changes.subscribe(this.subscribeToNodesChange.bind(this))},y.prototype.ngOnChanges=function(e){e.parentIndex&&this.setNodeChildren(this.mapToTreeItem(this.data))},y.prototype.fetchChildren=function(e,t){var i=this;return this.children(e).pipe(m.catchError(function(){return i.loadingService.notifyLoaded(t),f.EMPTY}),m.tap(function(){return i.loadingService.notifyLoaded(t)}))},Object.defineProperty(y.prototype,"nextFields",{get:function(){return u.isArray(this.textField)?1<this.textField.length?this.textField.slice(1):this.textField:[this.textField]},enumerable:!0,configurable:!0}),y.prototype.setNodeChildren=function(e){this.treeViewLookupService.registerChildren(this.parentIndex,e)},y.prototype.mapToTreeItem=function(e){var i=this;return this.parentIndex?e.map(function(e,t){return{dataItem:e,index:i.nodeIndex(t)}}):[]},y.prototype.emitChildrenLoaded=function(e){this.parentIndex&&this.nodeChildrenService.childrenLoaded({dataItem:this.parentDataItem,index:this.parentIndex},e)},y.prototype.subscribeToNodesChange=function(){var t=this;this.nodesSubscription&&this.nodesSubscription.unsubscribe(),this.nodesSubscription=this.nodes(this.parentDataItem,this.parentIndex).subscribe(function(e){t.data=e})},n.__decorate([r.HostBinding("class.k-group"),n.__metadata("design:type",Boolean)],y.prototype,"kGroupClass",void 0),n.__decorate([r.HostBinding("attr.role"),n.__metadata("design:type",String),n.__metadata("design:paramtypes",[])],y.prototype,"role",null),n.__decorate([r.Input(),n.__metadata("design:type",Boolean)],y.prototype,"checkboxes",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Boolean)],y.prototype,"expandIcons",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Boolean)],y.prototype,"disabled",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Boolean)],y.prototype,"touchActions",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],y.prototype,"nodes",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Object)],y.prototype,"textField",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Object)],y.prototype,"parentDataItem",void 0),n.__decorate([r.Input(),n.__metadata("design:type",String)],y.prototype,"parentIndex",void 0),n.__decorate([r.Input(),n.__metadata("design:type",r.TemplateRef)],y.prototype,"nodeTemplateRef",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],y.prototype,"isChecked",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],y.prototype,"isDisabled",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],y.prototype,"isExpanded",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],y.prototype,"isSelected",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],y.prototype,"children",void 0),n.__decorate([r.Input(),n.__metadata("design:type",Function)],y.prototype,"hasChildren",void 0),n.__decorate([r.Component({animations:[o.trigger("toggle",[o.transition("void => *",[o.style({height:0}),o.animate("0.1s ease-in",o.style({height:"*"}))]),o.transition("* => void",[o.style({height:"*"}),o.animate("0.1s ease-in",o.style({height:0}))])])],selector:"[kendoTreeViewGroup]",template:'\n        <li\n            *ngFor="let node of data; let index = index" class="k-item k-treeview-item"\n            kendoTreeViewItem\n            [dataItem]="node"\n            [index]="nodeIndex(index)"\n            [parentDataItem]="parentDataItem"\n            [parentIndex]="parentIndex"\n            [isChecked]="isChecked(node, nodeIndex(index))"\n            [isDisabled]="disabled || isDisabled(node, nodeIndex(index))"\n            [isExpanded]="isExpanded(node, nodeIndex(index))"\n            [isSelected]="isSelected(node, nodeIndex(index))"\n            [attr.data-treeindex]="nodeIndex(index)"\n        >\n            <div class="k-mid">\n                <span\n                    class="k-icon"\n                    [class.k-i-collapse]="isExpanded(node, nodeIndex(index))"\n                    [class.k-i-expand]="!isExpanded(node, nodeIndex(index))"\n                    [kendoTreeViewLoading]="nodeIndex(index)"\n                    (click)="expandNode(nodeIndex(index), node, !isExpanded(node, nodeIndex(index)))"\n                    *ngIf="expandIcons && hasChildren(node)"\n                    >\n                </span>\n                <kendo-checkbox\n                    *ngIf="checkboxes"\n                    [node]="node"\n                    [index]="nodeIndex(index)"\n                    [isChecked]="isChecked"\n                    (checkStateChange)="checkNode(nodeIndex(index))"\n                    tabindex="-1"\n                ></kendo-checkbox>\n                <span kendoTreeViewItemContent\n                    [attr.data-treeindex]="nodeIndex(index)"\n                    [dataItem]="node"\n                    [index]="nodeIndex(index)"\n                    [initialSelection]="isSelected(node, nodeIndex(index))"\n                    [isSelected]="isSelected"\n                    class="k-in"\n                    [style.touch-action]="touchActions ? \'\' : \'none\'"\n                >\n                    <ng-container [ngSwitch]="hasTemplate">\n                        <ng-container *ngSwitchCase="true">\n                            <ng-template\n                                [ngTemplateOutlet]="nodeTemplateRef" [ngTemplateOutletContext]="{$implicit: node, index: nodeIndex(index)}"\n                                >\n                            </ng-template>\n                        </ng-container>\n                        <ng-container *ngSwitchDefault>\n                            {{nodeText(node)}}\n                        </ng-container>\n                    </ng-container>\n                </span>\n            </div>\n            <ul\n                *ngIf="isExpanded(node, nodeIndex(index)) && hasChildren(node)"\n                kendoTreeViewGroup\n                role="group"\n                [nodes]="fetchChildren"\n                [checkboxes]="checkboxes"\n                [expandIcons]="expandIcons"\n                [touchActions]="touchActions"\n                [children]="children"\n                [hasChildren]="hasChildren"\n                [isChecked]="isChecked"\n                [isDisabled]="isDisabled"\n                [disabled]="disabled || isDisabled(node, nodeIndex(index))"\n                [isExpanded]="isExpanded"\n                [isSelected]="isSelected"\n                [nodeTemplateRef]="nodeTemplateRef"\n                [parentIndex]="nodeIndex(index)"\n                [parentDataItem]="node"\n                [textField]="nextFields"\n                [@toggle]="true"\n                >\n            </ul>\n        </li>\n    '}),n.__metadata("design:paramtypes",[s.ExpandStateService,h.LoadingNotificationService,d.IndexBuilderService,c.TreeViewLookupService,p.NavigationService,l.NodeChildrenService,v.DataChangeNotificationService])],y));function y(e,t,i,n,r,o,a){this.expandService=e,this.loadingService=t,this.indexBuilder=i,this.treeViewLookupService=n,this.navigationService=r,this.nodeChildrenService=o,this.dataChangeNotification=a,this.kGroupClass=!0,this.touchActions=!0,this.textField="",this._data=[],this.isChecked=function(){return"none"},this.isDisabled=function(){return!1},this.isExpanded=function(){return!1},this.isSelected=function(){return!1},this.children=function(){return f.of([])},this.hasChildren=function(){return!1}}t.TreeViewGroupComponent=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(4),a=i(52),s=i(50),d=i(11),c=i(24),p=i(23),l=i(22),u=i(21),h=i(20),f=i(48),m=i(17),v=i(45),g=i(44),y=i(43),_=i(16),b=i(10),x=i(9),I=i(30),D=i(28),S=i(15),C=[o.TreeViewComponent,a.TreeViewGroupComponent,v.TreeViewItemDirective,g.TreeViewItemContentDirective,d.NodeTemplateDirective,c.CheckDirective,p.DisableDirective,l.ExpandDirective,u.SelectDirective,h.HierarchyBindingDirective,f.LoadingIndicatorDirective,m.FlatDataBindingDirective,_.DragAndDropDirective,b.DragClueTemplateDirective,I.DragClueComponent,x.DropHintTemplateDirective,D.DropHintComponent,S.DragAndDropEditingDirective],k=n.__decorate([r.NgModule({declarations:[C],exports:[C],imports:[s.CommonModule,y.CheckBoxModule],entryComponents:[I.DragClueComponent,D.DropHintComponent]})],E);function E(){}t.SharedModule=k},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(4),a=i(53),s=i(11),d=i(24),c=i(23),p=i(22),l=i(21),u=i(20),h=i(17),f=i(16),m=i(10),v=i(9),g=i(15),y=[o.TreeViewComponent,s.NodeTemplateDirective,d.CheckDirective,c.DisableDirective,p.ExpandDirective,l.SelectDirective,u.HierarchyBindingDirective,h.FlatDataBindingDirective,f.DragAndDropDirective,m.DragClueTemplateDirective,v.DropHintTemplateDirective,g.DragAndDropEditingDirective],_=n.__decorate([r.NgModule({exports:[y],imports:[a.SharedModule]})],b);function b(){}t.TreeViewModule=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e){return e[e.length-1]}function n(e){return e||{}}function r(e){return n(e).children||[]}var o=i(13),s=i(2),d=(c.prototype.firstNode=function(){return this.nodes[0]||null},c.prototype.lastNode=function(){var e=this.nodes[this.nodes.length-1];return e?function(e){for(var t=e,i=[].concat(r(e));i.length;)t=(i=i.concat(r(a(i)))).shift();return t}(a(this.container(e)))||e:null},c.prototype.closestNode=function(e){var t=n(this.findNode(e)).prev||this.firstNode();return n(t).index===e?this.sibling(t,1):t},c.prototype.findNode=function(e){return this.find(e,this.nodes)},c.prototype.findParent=function(e){var t=this.ib.level(e)-1;return this.findNode(this.ib.indexForLevel(e,t))},c.prototype.findChild=function(e){return r(this.findNode(e))[0]||null},c.prototype.findPrev=function(e){var t=e.index,i=this.findParent(t);if(0===this.ib.lastLevelIndex(t))return i;var n=this.findNode(t),r=this.sibling(n,-1);if(r)for(var o=this.container(r);0<o.length;)r=a(o),o=this.container(r);return r},c.prototype.findNext=function(e){var t=this.container(e);return 0===t.length?this.sibling(e,1):t[0]},c.prototype.registerItem=function(e,t,i){var n=this.ib.level(t),r=this.findParent(t);if(r||1===n){var o={id:e,children:[],index:t,parent:r,disabled:i};this.insert(o,r)}},c.prototype.unregisterItem=function(e,t){var i=this.find(t,this.nodes);if(i&&i.id===e){var n=this.container(i.parent);n.splice(n.indexOf(i),1)}},c.prototype.childLevel=function(e){var t=e.filter(function(e){return s.isPresent(e)});return t&&t.length?this.ib.level(t[0].index):1},c.prototype.container=function(e){return e?e.children:this.nodes},c.prototype.find=function(e,t){var i=this.childLevel(t),n=this.ib.indexForLevel(e,i),r=i===this.ib.level(e),o=t.find(function(e){return e&&e.index===n});return o?r?o:this.find(e,o.children):null},c.prototype.insert=function(e,t){this.container(t).splice(this.ib.lastLevelIndex(e.index),0,e)},c.prototype.sibling=function(e,t){if(!e)return null;var i=this.findParent(e.index),n=this.container(i);return n[n.indexOf(e)+t]||this.sibling(i,t)||null},c);function c(){this.ib=new o.IndexBuilderService,this.nodes=[]}t.NavigationModel=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=function(){return!1},t.isChecked=function(){return"none"},t.isDisabled=function(){return!1},t.isExpanded=function(){return!0},t.isSelected=function(){return!1}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);t.TreeViewComponent=n.TreeViewComponent;var r=i(54);t.TreeViewModule=r.TreeViewModule;var o=i(11);t.NodeTemplateDirective=o.NodeTemplateDirective;var a=i(24);t.CheckDirective=a.CheckDirective;var s=i(23);t.DisableDirective=s.DisableDirective;var d=i(22);t.ExpandDirective=d.ExpandDirective;var c=i(21);t.SelectDirective=c.SelectDirective;var p=i(20);t.HierarchyBindingDirective=p.HierarchyBindingDirective;var l=i(17);t.FlatDataBindingDirective=l.FlatDataBindingDirective;var u=i(16);t.DragAndDropDirective=u.DragAndDropDirective;var h=i(15);t.DragAndDropEditingDirective=h.DragAndDropEditingDirective;var f=i(9);t.DropHintTemplateDirective=f.DropHintTemplateDirective;var m=i(10);t.DragClueTemplateDirective=m.DragClueTemplateDirective;var v=i(35);t.DropAction=v.DropAction;var g=i(34);t.DropPosition=g.DropPosition;var y=i(33);t.TreeItemDropEvent=y.TreeItemDropEvent;var _=i(32);t.TreeItemDragStartEvent=_.TreeItemDragStartEvent;var b=i(31);t.TreeItemDragEvent=b.TreeItemDragEvent,function(e){for(var t in e)x(t,e[t])}(t)}],n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=57)}}});